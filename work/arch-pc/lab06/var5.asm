;--------------------------------
; –ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è
;--------------------------------

%include 'in_out.asm'

SECTION .data
msg: DB '–í–∞—Ä–∏–∞–Ω—Ç ‚Ññ5 (9ùë• ‚àí 8)/8. –í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π x: ',0 ; –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –≤–≤–æ–¥–∞ –∑–Ω–∞—á–µ–Ω–∏—è x
rem: DB '–†–µ–∑—É–ª—å—Ç–∞—Ç: ',0 ; –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞


SECTION .bss
x: RESB 80	; –ë—É—Ñ–µ—Ä –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–≤–µ–¥–µ–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

SECTION .text
GLOBAL _start

_start:

mov eax, msg 	; –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–¥—Ä–µ—Å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –≤–≤–æ–¥–∞ x –≤ —Ä–µ–≥–∏—Å—Ç—Ä eax
call sprint	; –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω

mov ecx, x   	; –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ x –≤ —Ä–µ–≥–∏—Å—Ç—Ä ecx
mov edx, 80  	; –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É –≤–≤–æ–¥–∏–º–æ–π —Å—Ç—Ä–æ–∫–∏
call sread   	; –°—á–∏—Ç—ã–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–µ –≤ –±—É—Ñ–µ—Ä x

mov eax,x    	; –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ x –≤ —Ä–µ–≥–∏—Å—Ç—Ä eax
call atoi    	; –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º ASCII-–∫–æ–¥ –≤–≤–µ–¥–µ–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –≤ —á–∏—Å–ª–æ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ eax

;---------------------------------
; –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è (9*x - 8)/8
;---------------------------------

xor edx,edx  	; –û–±–Ω—É–ª—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä edx –ø–µ—Ä–µ–¥ –¥–µ–ª–µ–Ω–∏–µ–º 
mov ebx,9    	; –ó–∞–≥—Ä—É–∂–∞–µ–º 9 –≤ —Ä–µ–≥–∏—Å—Ç—Ä ebx
mul ebx      	; –£–º–Ω–æ–∂–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ eax (x) –Ω–∞ 9
sub eax,8    	; –í—ã—á–∏—Ç–∞–µ–º 8 –∏–∑ eax
mov ebx,8    	; –ó–∞–≥—Ä—É–∂–∞–µ–º 8 –≤ —Ä–µ–≥–∏—Å—Ç—Ä ebx
div ebx      	; –î–µ–ª–∏–º –Ω–∞ 8
mov edx,eax  	; –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ edx

;----------------------------
; –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
;----------------------------

mov eax,rem  	; –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–¥—Ä–µ—Å —Å–æ–æ–±—â–µ–Ω–∏—è '–†–µ–∑—É–ª—å—Ç–∞—Ç: '
call sprint  	; –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ '–†–µ–∑—É–ª—å—Ç–∞—Ç: '
mov eax,edx  	; –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ eax
call iprintLF 	; –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —ç–∫—Ä–∞–Ω —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º —Å—Ç—Ä–æ–∫–∏

call quit	; –ó–∞–≤–µ—Ä—à–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É
